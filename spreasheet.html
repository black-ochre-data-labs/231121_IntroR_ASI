<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Stevie Pederson">
<meta name="dcterms.date" content="2023-11-21">

<title>Spreadsheet-Like Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="spreadsheet_slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="spreadsheet_slides_files/libs/quarto-html/quarto.js"></script>
<script src="spreadsheet_slides_files/libs/quarto-html/popper.min.js"></script>
<script src="spreadsheet_slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="spreadsheet_slides_files/libs/quarto-html/anchor.min.js"></script>
<link href="spreadsheet_slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="spreadsheet_slides_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="spreadsheet_slides_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="spreadsheet_slides_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="spreadsheet_slides_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#tidying-spreadsheet-like-data" id="toc-tidying-spreadsheet-like-data" class="nav-link active" data-scroll-target="#tidying-spreadsheet-like-data">Tidying<br>Spreadsheet-Like<br>Data</a></li>
  <li><a href="#the-package-dplyr" id="toc-the-package-dplyr" class="nav-link" data-scroll-target="#the-package-dplyr">The package <br><code>dplyr</code></a></li>
  <li><a href="#combining-functions" id="toc-combining-functions" class="nav-link" data-scroll-target="#combining-functions">Combining <br>Functions</a></li>
  <li><a href="#applying-functions-across-multiple-columns" id="toc-applying-functions-across-multiple-columns" class="nav-link" data-scroll-target="#applying-functions-across-multiple-columns">Applying Functions Across Multiple Columns</a></li>
  <li><a href="#combining-data-frames" id="toc-combining-data-frames" class="nav-link" data-scroll-target="#combining-data-frames">Combining Data Frames</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="spreadsheet_slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spreadsheet-Like Data</h1>
<p class="subtitle lead">ASI: Introduction to R</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Stevie Pederson </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            </p><p>Black Ochre Data Labs<br>
            Telethon Kids Institute</p>
          <p></p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 21, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="tidying-spreadsheet-like-data" class="level1" data-background-color="#3c3c44" data-background-image="https://www.tidyverse.org/images/hex-tidyverse.png" data-background-size="30%" data-background-opacity="0.4" data-background-position="67% 50%">
<h1 data-background-color="#3c3c44" data-background-image="https://www.tidyverse.org/images/hex-tidyverse.png" data-background-size="30%" data-background-opacity="0.4" data-background-position="67% 50%">Tidying<br>Spreadsheet-Like<br>Data</h1>
<section id="section-setup" class="level2">
<h2 class="anchored" data-anchor-id="section-setup">Section Setup</h2>
<ul>
<li>Clear your <code>R</code> Environment</li>
<li>Create a new script called ‘TidyingData.R’</li>
<li>Load the tidyverse</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p><br>We’ll cover:</p>
<ul>
<li>More challenging data importing</li>
<li><code>SQL-</code> and <code>Excel-</code>like functions in <code>dplyr</code></li>
<li>Pivoting and manipulating using <code>tidyr</code></li>
</ul>
</section>
<section id="importing-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-data">Importing Data</h2>
<ul>
<li>We’ll use a new dataset for this section: <code>data/transport.csv</code></li>
<li>Open a Preview using your favourite method <em>before</em> we import into <code>R</code></li>
</ul>
<div class="incremental">
<ul class="incremental">
<li>Note a few challenges here:
<ul class="incremental">
<li>Two idiots have put comments at the top of the file</li>
<li>There are no column names</li>
<li>The first column appears to just be the row numbers</li>
</ul></li>
</ul>
</div>
</section>
<section id="importing-data-1" class="level2">
<h2 class="anchored" data-anchor-id="importing-data-1">Importing Data</h2>
<p>Planning the import:</p>
<div class="incremental">
<ul class="incremental">
<li>How do we handle the comments?
<ul class="incremental">
<li>Check the help page (<code>?read_csv</code>)</li>
<li><code>comment = ""</code> can tell <code>read_csv()</code> which lines are comments</li>
</ul></li>
<li>How do we handle the missing <code>col_names</code>?
<ul class="incremental">
<li>We can provide a character vector of column names</li>
</ul></li>
<li>Can we skip the first column?
<ul class="incremental">
<li>Yes, we can tell <code>read_csv</code> what data type is in each column</li>
<li>Also allows us to skip columns</li>
</ul></li>
</ul>
</div>
</section>
<section id="importing-data-2" class="level2">
<h2 class="anchored" data-anchor-id="importing-data-2">Importing Data</h2>
<ul>
<li>By constructing our code carefully <br> <span class="math inline">\(\implies\)</span> import this file as many times as we want</li>
<li>We have:
<ol type="1">
<li>Set <code>comment = "#"</code> to skip lines beginning with <code>#</code></li>
<li>Provided a vector of appropriate column names</li>
<li>Asked <code>read_csv()</code> to skip the first column (<code>"-ccnnc"</code>)<br><span class="math inline">\(\implies\)</span> defined column types as ‘skip’, ‘character’, ‘character’, ‘numeric’, ‘numeric’, ‘character’</li>
</ol></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"name"</span>, <span class="st">"weight"</span>, <span class="st">"height"</span>, <span class="st">"method"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>transport <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/transport.csv"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">comment =</span> <span class="st">"#"</span>, <span class="at">col_names =</span> cols, <span class="at">col_types =</span> <span class="st">"-ccnnc"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>So we have a 32 x 5 <code>data frame</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(transport)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="logical-tests" class="level2">
<h2 class="anchored" data-anchor-id="logical-tests">Logical Tests</h2>
<ul>
<li>Before we start to explore <code>transport</code> <span class="math inline">\(\implies\)</span> <strong>Logical Tests</strong></li>
</ul>
<div class="incremental">
<ul class="incremental">
<li>Is Equal To: <code>==</code></li>
<li>Not equal: <code>!=</code></li>
<li>Or: <code>|</code></li>
<li>And: <code>&amp;</code></li>
<li>Less than: <code>&lt;</code></li>
<li>Less than or equal: <code>&lt;=</code></li>
</ul>
</div>
</section>
<section id="logical-tests-1" class="level2">
<h2 class="anchored" data-anchor-id="logical-tests-1">Logical Tests</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="cn">NA</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">5</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> <span class="dv">5</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">3</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">|</span> x <span class="sc">==</span> <span class="dv">2</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>Can also return which positions within a logical vector are <code>TRUE</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>transport<span class="sc">$</span>height <span class="sc">&gt;</span> <span class="dv">180</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(transport<span class="sc">$</span>height <span class="sc">&gt;</span> <span class="dv">180</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-package-dplyr" class="level1" data-background-color="#3c3c44" data-background-image="https://swag.rstudio.com/uploads/1/3/1/3/131335021/s815253891256106552_p2_i4_w660.png" data-background-size="35%" data-background-opacity="0.5" data-background-position="70% 50%">
<h1 data-background-color="#3c3c44" data-background-image="https://swag.rstudio.com/uploads/1/3/1/3/131335021/s815253891256106552_p2_i4_w660.png" data-background-size="35%" data-background-opacity="0.5" data-background-position="70% 50%">The package <br><code>dplyr</code></h1>
<section id="working-with-tibble-objects" class="level2">
<h2 class="anchored" data-anchor-id="working-with-tibble-objects">Working with <code>tibble</code> Objects</h2>
<ul>
<li>Conventional subsetting and explorations <br><span class="math inline">\(\implies\)</span> mostly square brackets along with <code>subset()</code></li>
</ul>
<p>. . .</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Just get the first 4 rows</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>transport[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  gender name    weight height method
  &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
1 female Jerrin    63.6   163. car   
2 female Taylor    65.9   168. bike  
3 female Kalen     58.9   162. bike  
4 Female Abigail   58.3   163. bike  </code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## The weight &amp; height columns only (could also use numeric position)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>transport[, <span class="fu">c</span>(<span class="st">"weight"</span>, <span class="st">"height"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 2
   weight height
    &lt;dbl&gt;  &lt;dbl&gt;
 1   63.6   163.
 2   65.9   168.
 3   58.9   162.
 4   58.3   163.
 5   62.9   166.
 6   65.0   167.
 7   65.9   168.
 8   67.5   169.
 9   64.4   167.
10   58.1   163.
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="using-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyr">Using <code>dplyr</code></h2>
<ul>
<li><code>dplyr</code> is a core <code>tidyverse</code> package
<ul>
<li>Was a <em>game-changer</em> upon release</li>
</ul></li>
<li>Inspired by SQL operations</li>
<li>Uses similar function names to SQL</li>
</ul>
<p>. . .</p>
<ul>
<li>So do lots of other packages
<ul>
<li>Quite easy to side-step these issues if you know how…</li>
</ul></li>
</ul>
</section>
<section id="starting-with-dplyrselect" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-dplyrselect">Starting with <code>dplyr::select()</code></h2>
<ul>
<li>The function <code>select()</code> allows you to select columns by name
<ul>
<li>Quoting column names is often optional in the <code>tidyverse</code></li>
</ul></li>
<li>The <code>tibble</code> must be given as the first argument
<ul>
<li>Defined in the help page as <code>.data</code></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, gender, name, weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>Or by position</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p><br></p>
<ul>
<li><strong>NB: We have not modified the original object!</strong>
<ul>
<li>Only when we use the <code>&lt;-</code> symbol</li>
</ul></li>
</ul>
</section>
<section id="starting-with-dplyrselect-1" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-dplyrselect-1">Starting with <code>dplyr::select()</code></h2>
<ul>
<li>We can also remove columns using the minus (<code>-</code>) sign</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="sc">-</span>name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>Discuss: Would removing by name or position by the best?</strong></p>
<div class="notes">
<p>If we remove by name and the column has already been removed, we will get an error</p>
</div>
</section>
<section id="starting-with-dplyrselect-2" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-dplyrselect-2">Starting with <code>dplyr::select()</code></h2>
<p>The <code>select()</code> function has a few helper functions</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="fu">ends_with</span>(<span class="st">"ght"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<ul>
<li><code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>
<ul>
<li>All take a single text string to match amongst column names</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><code>one_of()</code>, <code>any_of()</code>, <code>all_of()</code>
<ul>
<li>Take a character vector listing column names</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="fu">contains</span>(<span class="st">"t"</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"not_here"</span>)))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, <span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"not_here"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="starting-with-dplyrselect-3" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-dplyrselect-3">Starting with <code>dplyr::select()</code></h2>
<ul>
<li><code>everything()</code>, <code>last_col()</code>
<ul>
<li>Very helpful for re-ordering columns</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(transport, name, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<ul>
<li>All helpers are in the package <code>tidyselect</code> (always loaded by <code>dplyr</code>)</li>
</ul>
</section>
<section id="selecting-rows-with-dplyrslice" class="level2">
<h2 class="anchored" data-anchor-id="selecting-rows-with-dplyrslice">Selecting Rows with <code>dplyr::slice()</code></h2>
<ul>
<li>We can choose <em>columns by name or position</em> using <code>select()</code></li>
<li><code>tibble</code> objects <em>have no rownames</em></li>
<li>Can only select rows using <em>position</em>, or <em>filtering by value</em></li>
</ul>
<p>. . .</p>
<ul>
<li><code>slice()</code> is similar to selecting rows using the square brackets</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(transport, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<ul>
<li>No need for consecutive rows</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(transport, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">15</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-dplyrfilter" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrfilter">Using <code>dplyr::filter()</code></h2>
<ul>
<li>We can use our logical tests to filter the data
<ul>
<li>Returns rows based on values</li>
</ul></li>
<li>Again we need to specify the <code>tibble</code> as the first argument</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(transport, method <span class="sc">==</span> <span class="st">"car"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(transport, method <span class="sc">==</span> <span class="st">"car"</span>, gender <span class="sc">==</span> <span class="st">"female"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<ul>
<li>Using two queries with a comma is the same as typing <code>&amp;</code>
<ul>
<li>Queries are executed in order</li>
</ul></li>
</ul>
<div class="notes">
<p>We’ll fix those weird gender entries very soon</p>
</div>
</section>
<section id="using-dplyrarrange" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrarrange">Using <code>dplyr::arrange()</code></h2>
<p>We can sort on one or more columns</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(transport, height)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(transport, method, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p><br>We can change to descending order using <code>desc()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(transport, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="combining-functions" class="level1" data-background-color="#3c3c44" data-background-image="https://magrittr.tidyverse.org/logo.png" data-background-size="35%" data-background-opacity="0.5" data-background-position="70% 50%">
<h1 data-background-color="#3c3c44" data-background-image="https://magrittr.tidyverse.org/logo.png" data-background-size="35%" data-background-opacity="0.5" data-background-position="70% 50%">Combining <br>Functions</h1>
<section id="combining-functions-1" class="level2">
<h2 class="anchored" data-anchor-id="combining-functions-1">Combining Functions</h2>
<ul>
<li>This is where <code>dplyr</code> and the <code>tidyverse</code> steps up a gear</li>
<li>We can chain functions together using <code>|&gt;</code></li>
<li>This behaves like a pipe (<code>|</code>) in the bash shell</li>
<li>Originally introduced as <code>%&gt;%</code> from the package <code>magrittr</code>
<ul>
<li><code>|&gt;</code> Added to <code>base</code> in R v4.2.0</li>
<li>Older code may contain <code>%&gt;%</code></li>
<li>(My current code still contains <code>%&gt;%</code>)</li>
</ul></li>
</ul>
<p>. . .</p>
<blockquote class="blockquote">
<p><code>|&gt;</code> places the <strong>output of the a function</strong> as the <strong>first argument</strong> of the next function!</p>
</blockquote>
<div class="notes">
<ul>
<li>Apparently <code>|&gt;</code> has some advantages, but I haven’t figured them out yet</li>
<li>I understand the nuances of <code>%&gt;%</code> so am sticking with it</li>
</ul>
</div>
</section>
<section id="combining-functions-2" class="level2">
<h2 class="anchored" data-anchor-id="combining-functions-2">Combining Functions</h2>
<p>Both of these are identical in their results</p>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(transport, method <span class="sc">==</span> <span class="st">"bike"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   gender name     weight height method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 female Taylor     65.9   168. bike  
 2 female Kalen      58.9   162. bike  
 3 Female Abigail    58.3   163. bike  
 4 Female Dakota     62.9   166. bike  
 5 female Brittany   65.9   168. bike  
 6 female Hanna      67.5   169. bike  
 7 female Kellie     64.4   167. bike  
 8 female Kimber     58.1   163. bike  
 9 F      Mollie     67.7   169. bike  
10 F      Mary       61.3   164. bike  
11 female Megan      77.7   176. bike  
12 female Carter     68.1   170. bike  
13 female Jayln      72.2   170. bike  
14 Male   Michael    74.6   174. bike  
15 male   Nicholas   95.7   186. bike  
16 male   Matthew    74.3   174. bike  
17 male   Grant      78.6   175. bike  </code></pre>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">"bike"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   gender name     weight height method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 female Taylor     65.9   168. bike  
 2 female Kalen      58.9   162. bike  
 3 Female Abigail    58.3   163. bike  
 4 Female Dakota     62.9   166. bike  
 5 female Brittany   65.9   168. bike  
 6 female Hanna      67.5   169. bike  
 7 female Kellie     64.4   167. bike  
 8 female Kimber     58.1   163. bike  
 9 F      Mollie     67.7   169. bike  
10 F      Mary       61.3   164. bike  
11 female Megan      77.7   176. bike  
12 female Carter     68.1   170. bike  
13 female Jayln      72.2   170. bike  
14 Male   Michael    74.6   174. bike  
15 male   Nicholas   95.7   186. bike  
16 male   Matthew    74.3   174. bike  
17 male   Grant      78.6   175. bike  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="combining-functions-3" class="level2">
<h2 class="anchored" data-anchor-id="combining-functions-3">Combining Functions</h2>
<p>Now we can perform <u>multiple operations</u>!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">"bike"</span>) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   gender name     weight height method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 female Kimber     58.1   163. bike  
 2 Female Abigail    58.3   163. bike  
 3 female Kalen      58.9   162. bike  
 4 F      Mary       61.3   164. bike  
 5 Female Dakota     62.9   166. bike  
 6 female Kellie     64.4   167. bike  
 7 female Brittany   65.9   168. bike  
 8 female Taylor     65.9   168. bike  
 9 female Hanna      67.5   169. bike  
10 F      Mollie     67.7   169. bike  
11 female Carter     68.1   170. bike  
12 female Jayln      72.2   170. bike  
13 male   Matthew    74.3   174. bike  
14 Male   Michael    74.6   174. bike  
15 female Megan      77.7   176. bike  
16 male   Grant      78.6   175. bike  
17 male   Nicholas   95.7   186. bike  </code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>There is <strong>no limit</strong> to the number of operations you can chain together</li>
<li>We are interacting with <code>transport</code> “on the fly” <span class="math inline">\(\implies\)</span> not modifying the object</li>
</ul>
<div class="notes">
<p>Also note that we have not modified our original data frame</p>
</div>
</section>
<section id="for-the-technically-minded" class="level2">
<h2 class="anchored" data-anchor-id="for-the-technically-minded">For the technically minded</h2>
<div style="font-size:95%">
<ol type="1">
<li>Each function in <code>dplyr</code> takes a <code>data.frame</code> as the first argument</li>
<li>Each function returns a <code>data.frame</code></li>
</ol>
<div class="cell" data-layout-align="center" data-output-location="column">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">"bike"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   gender name     weight height method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 female Kalen      58.9   162. bike  
 2 female Kimber     58.1   163. bike  
 3 Female Abigail    58.3   163. bike  
 4 F      Mary       61.3   164. bike  
 5 Female Dakota     62.9   166. bike  
 6 female Kellie     64.4   167. bike  
 7 female Brittany   65.9   168. bike  
 8 female Taylor     65.9   168. bike  
 9 F      Mollie     67.7   169. bike  
10 female Hanna      67.5   169. bike  
11 female Jayln      72.2   170. bike  
12 female Carter     68.1   170. bike  
13 Male   Michael    74.6   174. bike  
14 male   Matthew    74.3   174. bike  
15 male   Grant      78.6   175. bike  
16 female Megan      77.7   176. bike  
17 male   Nicholas   95.7   186. bike  </code></pre>
</div>
</div>
<div class="fragment">
<ol type="1">
<li><code>|&gt;</code> placed <code>transport</code> into the first argument of <code>filter()</code></li>
<li>The output of <code>filter()</code> was a <code>data.frame</code> <br><span class="math inline">\(\implies\)</span> became the first argument to <code>arrange()</code></li>
</ol>
</div>
</div>
</section>
<section id="using-dplyrmutate" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrmutate">Using <code>dplyr::mutate()</code></h2>
<p>We can add extra columns using <code>mutate()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height_m2 =</span> (height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 6
   gender name     weight height method height_m2
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
 1 female Jerrin     63.6   163. car         2.67
 2 female Taylor     65.9   168. bike        2.82
 3 female Kalen      58.9   162. bike        2.61
 4 Female Abigail    58.3   163. bike        2.67
 5 Female Dakota     62.9   166. bike        2.76
 6 female Melissa    65.0   167. car         2.77
 7 female Brittany   65.9   168. bike        2.81
 8 female Hanna      67.5   169. bike        2.87
 9 female Kellie     64.4   167. bike        2.79
10 female Kimber     58.1   163. bike        2.66
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="using-dplyrmutate-1" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrmutate-1">Using <code>dplyr::mutate()</code></h2>
<p>Once we’ve added a column, we can refer to it by name and keep adding</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">height_m2 =</span> (height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>, </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">BMI =</span> weight <span class="sc">/</span> height_m2</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 7
   gender name     weight height method height_m2   BMI
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1 female Jerrin     63.6   163. car         2.67  23.8
 2 female Taylor     65.9   168. bike        2.82  23.4
 3 female Kalen      58.9   162. bike        2.61  22.6
 4 Female Abigail    58.3   163. bike        2.67  21.8
 5 Female Dakota     62.9   166. bike        2.76  22.8
 6 female Melissa    65.0   167. car         2.77  23.5
 7 female Brittany   65.9   168. bike        2.81  23.5
 8 female Hanna      67.5   169. bike        2.87  23.5
 9 female Kellie     64.4   167. bike        2.79  23.1
10 female Kimber     58.1   163. bike        2.66  21.8
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="using-dplyrmutate-2" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrmutate-2">Using <code>dplyr::mutate()</code></h2>
<p>We can also modify existing columns <em>in place</em></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height =</span> height<span class="sc">/</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 5
   gender name     weight height method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
 1 female Jerrin     63.6   1.63 car   
 2 female Taylor     65.9   1.68 bike  
 3 female Kalen      58.9   1.62 bike  
 4 Female Abigail    58.3   1.63 bike  
 5 Female Dakota     62.9   1.66 bike  
 6 female Melissa    65.0   1.67 car   
 7 female Brittany   65.9   1.68 bike  
 8 female Hanna      67.5   1.69 bike  
 9 female Kellie     64.4   1.67 bike  
10 female Kimber     58.1   1.63 bike  
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>. . .</p>
<p><br> <strong>Have we changed the original</strong> <code>object</code> yet?</p>
</section>
<section id="using-dplyrrename" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrrename">Using <code>dplyr::rename()</code></h2>
<p>Can use the function <code>rename()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">height_cm =</span> height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 5
   gender name     weight height_cm method
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt; 
 1 female Jerrin     63.6      163. car   
 2 female Taylor     65.9      168. bike  
 3 female Kalen      58.9      162. bike  
 4 Female Abigail    58.3      163. bike  
 5 Female Dakota     62.9      166. bike  
 6 female Melissa    65.0      167. car   
 7 female Brittany   65.9      168. bike  
 8 female Hanna      67.5      169. bike  
 9 female Kellie     64.4      167. bike  
10 female Kimber     58.1      163. bike  
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="using-dplyrrename-1" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyrrename-1">Using <code>dplyr::rename()</code></h2>
<p>Now we can go crazy with multiple processes</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">height_cm =</span> height) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">height_m2 =</span> (height_cm<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>, </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">BMI =</span> weight <span class="sc">/</span> height_m2</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(BMI <span class="sc">&gt;</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 7
   gender name     weight height_cm method height_m2   BMI
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1 male   Dylan      76.5      172. car         2.97  25.7
 2 male   Jacob      79.5      176. car         3.10  25.7
 3 male   Nicholas   95.7      186. bike        3.44  27.8
 4 Male   William    90.5      184. car         3.38  26.8
 5 male   Kevin      83.5      178. car         3.16  26.4
 6 male   Chase      88.0      183. car         3.33  26.4
 7 M      Garrett    81.1      177. car         3.15  25.8
 8 male   Grant      78.6      175. bike        3.05  25.7
 9 male   Jordan     81.4      178. car         3.17  25.7
10 male   Kenneth    82.1      178. car         3.16  26.0
11 male   Branden    91.2      184. car         3.38  27.0</code></pre>
</div>
</div>
<p>. . .</p>
<p>NB: <em>We have never modified our original data object once imported!</em></p>
</section>
<section id="combining-with-case_when" class="level2">
<h2 class="anchored" data-anchor-id="combining-with-case_when">Combining with <code>case_when()</code></h2>
<ul>
<li>This is how we can tidy our strange values in the <code>gender</code> column
<ul>
<li>First check what is there</li>
<li><code>pull()</code> grabs a single column as a vector (like <code>$</code>)</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(<span class="st">"gender"</span>) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     F female Female      M   male   Male 
     2     12      2      1     13      2 </code></pre>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>We should use the majority coding format <span class="math inline">\(\implies\)</span> <code>female</code> or <code>male</code>
<ul class="incremental">
<li>Both <code>F</code> and <code>Female</code> <span class="math inline">\(\implies\)</span> <code>female</code></li>
<li>Both <code>M</code> and <code>Male</code> <span class="math inline">\(\implies\)</span> <code>male</code></li>
<li>This will also become a <code>factor</code> after being corrected</li>
</ul></li>
</ul>
</div>
</section>
<section id="combining-with-case_when-1" class="level2">
<h2 class="anchored" data-anchor-id="combining-with-case_when-1">Combining with <code>case_when()</code></h2>
<ul>
<li><code>case_when()</code> performs a logical test on the LHS
<ul>
<li>Replaces with the value on the RHS if <code>TRUE</code></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"F"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"female"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">~</span> <span class="st">"male"</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(<span class="st">"gender"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
female   male 
    16     16 </code></pre>
</div>
</div>
<p>. . .</p>
<p><br><strong>Could we have made this shorter?</strong></p>
</section>
<section id="combining-with-case_when-2" class="level2">
<h2 class="anchored" data-anchor-id="combining-with-case_when-2">Combining with <code>case_when()</code></h2>
<ul>
<li><code>case_when()</code> steps through conditions hierarchically
<ul>
<li>Similar to a series of nested <code>ifelse()</code> statements</li>
<li>Once <code>TRUE</code> is returned that value is excluded from future tests</li>
<li>Don’t need to reassign <code>"female"</code> or <code>"male"</code> values</li>
</ul></li>
</ul>
<p>. . .</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"F"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> gender <span class="co"># Use what's already in the `gender` column</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(<span class="st">"gender"</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
female   male 
    16     16 </code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>This final <code>TRUE</code> catches everything that hasn’t yet been <code>TRUE</code></li>
</ul>
</section>
<section id="combining-with-case_when-3" class="level2">
<h2 class="anchored" data-anchor-id="combining-with-case_when-3">Combining with <code>case_when()</code></h2>
<ul>
<li>We could also shorten further using <code>str_to_lower</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"F"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">str_to_lower</span>(gender)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(<span class="st">"gender"</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
female   male 
    16     16 </code></pre>
</div>
</div>
<p>. . .</p>
<p><br>I would do this during data import</p>
</section>
<section id="modifying-an-object-during-import" class="level2">
<h2 class="anchored" data-anchor-id="modifying-an-object-during-import">Modifying an object during import</h2>
<ul>
<li>My full import code chunk might be as below:
<ul>
<li>Everything is done once at import</li>
<li><em>Almost never</em> modify the actual object once imported</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"name"</span>, <span class="st">"weight"</span>, <span class="st">"height"</span>, <span class="st">"method"</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>transport <span class="ot">&lt;-</span> <span class="st">"data/transport.csv"</span> <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(<span class="at">comment =</span> <span class="st">"#"</span>, <span class="at">col_names =</span> cols, <span class="at">col_types =</span> <span class="st">"-ccnnc"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Correct erroneous gender encoding, then set as a factor</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"F"</span> <span class="sc">~</span> <span class="st">"female"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>            gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"male"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">str_to_lower</span>(gender)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">gender =</span> <span class="fu">as.factor</span>(gender),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Set method as a factor</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">method =</span> <span class="fu">factor</span>(method, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"car"</span>, <span class="st">"bike"</span>)),</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Calculate BMI</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">BMI =</span> weight <span class="sc">/</span> (<span class="fl">0.01</span> <span class="sc">*</span> height) <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="notes">
<ul>
<li>Note that we manually set the factor levels for the method, but went with alphanumeric for gender</li>
<li>We also imported, found the problem, then modified our import code
<ul>
<li>This is a common strategy <span class="math inline">\(\implies\)</span> load then fix</li>
</ul></li>
</ul>
</div>
</section>
<section id="getting-summaries" class="level2">
<h2 class="anchored" data-anchor-id="getting-summaries">Getting Summaries</h2>
<p>We can get summaries for entire columns</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_weight =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_height =</span> <span class="fu">mean</span>(height),</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_bmi =</span> <span class="fu">mean</span>(BMI)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  mn_weight mn_height mn_bmi
      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1      72.8      172.   24.5</code></pre>
</div>
</div>
</section>
<section id="getting-summaries-1" class="level2">
<h2 class="anchored" data-anchor-id="getting-summaries-1">Getting Summaries</h2>
<p>We can group categorical variables by their levels</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_weight =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_height =</span> <span class="fu">mean</span>(height), </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_bmi =</span> <span class="fu">mean</span>(BMI),</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.by =</span> gender</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  gender mn_weight mn_height mn_bmi
  &lt;fct&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 female      64.6      167.   23.2
2 male        81.0      177.   25.8</code></pre>
</div>
</div>
</section>
<section id="getting-group-summaries" class="level2">
<h2 class="anchored" data-anchor-id="getting-group-summaries">Getting Group Summaries</h2>
<p>Or combinations of levels</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_weight =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_height =</span> <span class="fu">mean</span>(height), </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">mn_bmi =</span> <span class="fu">mean</span>(BMI),      </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.by =</span> <span class="fu">c</span>(gender, method)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  gender method mn_weight mn_height mn_bmi
  &lt;fct&gt;  &lt;fct&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 female car         61.4      163.   23.0
2 female bike        65.3      167.   23.3
3 male   bike        80.8      177.   25.7
4 male   car         81.1      177.   25.8</code></pre>
</div>
</div>
<p>. . .</p>
<p><br>Can use any function that spits out a single value e.g.&nbsp;<code>sd()</code>, <code>min()</code>, <code>median()</code></p>
</section>
<section id="getting-group-summaries-1" class="level2">
<h2 class="anchored" data-anchor-id="getting-group-summaries-1">Getting Group Summaries</h2>
<p>Count how many entries in each combination using <code>n()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">mn_weight =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">mn_height =</span> <span class="fu">mean</span>(height), </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">mn_bmi =</span> <span class="fu">mean</span>(BMI),      </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">.by =</span> <span class="fu">c</span>(gender, method)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  gender method     n mn_weight mn_height mn_bmi
  &lt;fct&gt;  &lt;fct&gt;  &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
1 female car        3      61.4      163.   23.0
2 female bike      13      65.3      167.   23.3
3 male   bike       4      80.8      177.   25.7
4 male   car       12      81.1      177.   25.8</code></pre>
</div>
</div>
</section>
</section>
<section id="applying-functions-across-multiple-columns" class="level1" data-background-color="#3c3c44">
<h1 data-background-color="#3c3c44">Applying Functions Across Multiple Columns</h1>
<section id="applying-functions-across-multiple-columns-1" class="level2">
<h2 class="anchored" data-anchor-id="applying-functions-across-multiple-columns-1">Applying Functions Across Multiple Columns</h2>
<ul>
<li>Use the helper function <code>across()</code></li>
<li>Can apply <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code> syntax to select variables/columns</li>
<li>Pass a function to the <code>.fns</code> argument</li>
</ul>
</section>
<section id="applying-functions-across-multiple-columns-2" class="level2">
<h2 class="anchored" data-anchor-id="applying-functions-across-multiple-columns-2">Applying Functions Across Multiple Columns</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">"ght"</span>), <span class="at">.fns =</span> mean),</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">.by =</span> <span class="fu">c</span>(gender, method)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  gender method weight height
  &lt;fct&gt;  &lt;fct&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 female car      61.4   163.
2 female bike     65.3   167.
3 male   bike     80.8   177.
4 male   car      81.1   177.</code></pre>
</div>
</div>
</section>
<section id="applying-multiple-functions" class="level2">
<h2 class="anchored" data-anchor-id="applying-multiple-functions">Applying Multiple Functions</h2>
<ul>
<li>We can pass multiple functions to multiple columns
<ul>
<li>Naming these functions makes the output clearer</li>
<li>Function name is appended to the end of the column name</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">ends_with</span>(<span class="st">"ght"</span>), <span class="at">.fns =</span> <span class="fu">c</span>(<span class="at">mn =</span> mean, <span class="at">sd =</span> sd)),</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(gender, method)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  gender method     n weight_mn weight_sd height_mn height_sd
  &lt;fct&gt;  &lt;fct&gt;  &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 female car        3      61.4      5.08      163.      3.20
2 female bike      13      65.3      5.66      167.      3.95
3 male   bike       4      80.8     10.1       177.      5.77
4 male   car       12      81.1      6.44      177.      4.45</code></pre>
</div>
</div>
</section>
</section>
<section id="combining-data-frames" class="level1" data-background-color="#3c3c44">
<h1 data-background-color="#3c3c44">Combining Data Frames</h1>
<section id="combining-data-frames-1" class="level2">
<h2 class="anchored" data-anchor-id="combining-data-frames-1">Combining Data Frames</h2>
<p><code>dplyr</code> has some very useful functions for combining <code>data.frame</code> objects</p>
<ul>
<li><code>bind_rows()</code> and <code>bind_cols()</code></li>
<li><code>left_join()</code>, <code>right_join()</code> and <code>full_join()</code></li>
</ul>
<!-- Amazingly, we've just had data from `Tony` and he's a 83kg car-driver, who is 177.3cm tall. -->
<!-- - We can manually create a `tibble` just for him -->
<!-- ## Combining Data Frames -->
<!-- ```{r} -->
<!-- tony <- tibble( -->
<!--   gender = "male", -->
<!--   name = "Tony", -->
<!--   weight = 83, -->
<!--   height = 177.3, -->
<!--   method = "car" -->
<!-- ) -->
<!-- ``` -->
<!-- We can add his data using `bind_rows()` -->
<!-- ```{r} -->
<!-- bind_rows(tony, transport) -->
<!-- ``` -->
</section>
<section id="combining-data-frames-2" class="level2">
<h2 class="anchored" data-anchor-id="combining-data-frames-2">Combining Data Frames</h2>
<div class="cell" data-layout-align="center" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>contacts <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/contacts.csv"</span>, <span class="at">col_types =</span> <span class="st">"cc"</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(contacts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 34
Columns: 2
$ name    &lt;chr&gt; "Abigail", "Bowen", "Branden", "Brittany", "Carter", "Chase", …
$ contact &lt;chr&gt; "0542156907", "0572965014", "0525308694", "0546083952", "05791…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(transport)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 6
$ gender &lt;fct&gt; female, female, female, female, female, female, female, female,…
$ name   &lt;chr&gt; "Jerrin", "Taylor", "Kalen", "Abigail", "Dakota", "Melissa", "B…
$ weight &lt;dbl&gt; 63.59912, 65.93163, 58.91200, 58.32553, 62.90232, 65.02272, 65.…
$ height &lt;dbl&gt; 163.4365, 167.9941, 161.6194, 163.4449, 166.0241, 166.5168, 167…
$ method &lt;fct&gt; car, bike, bike, bike, bike, car, bike, bike, bike, bike, car, …
$ BMI    &lt;dbl&gt; 23.80965, 23.36177, 22.55364, 21.83314, 22.82047, 23.45033, 23.…</code></pre>
</div>
</div>
</section>
<section id="combining-data-frames-3" class="level2">
<h2 class="anchored" data-anchor-id="combining-data-frames-3">Combining Data Frames</h2>
<p><strong>Do these objects look compatible?</strong></p>
<div class="incremental">
<ul class="incremental">
<li>Some may be missing in one of the objects</li>
<li>The values in the <code>name</code> column look similar</li>
<li>In a different order</li>
</ul>
<p><span class="fragment fade-in"><strong>How do we combine these?</strong></span></p>
</div>
</section>
<section id="dplyrleft_join" class="level2">
<h2 class="anchored" data-anchor-id="dplyrleft_join"><code>dplyr::left_join()</code></h2>
<ul>
<li>We can use the first <code>tibble</code> as the template: <code>left_join()</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(transport, contacts, <span class="at">by =</span> <span class="st">"name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 7
   gender name     weight height method   BMI contact   
   &lt;fct&gt;  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
 1 female Jerrin     63.6   163. car     23.8 0548903275
 2 female Taylor     65.9   168. bike    23.4 0594078621
 3 female Kalen      58.9   162. bike    22.6 0554879160
 4 female Abigail    58.3   163. bike    21.8 0542156907
 5 female Dakota     62.9   166. bike    22.8 0545860271
 6 female Melissa    65.0   167. car     23.5 0525907138
 7 female Brittany   65.9   168. bike    23.5 0546083952
 8 female Hanna      67.5   169. bike    23.5 0506213847
 9 female Kellie     64.4   167. bike    23.1 0547250369
10 female Kimber     58.1   163. bike    21.8 0518650974
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li><code>name</code> entries missing from <code>contacts</code> will become <code>NA</code> in <code>contact</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">left_join</span>(contacts, <span class="at">by =</span> <span class="st">"name"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(contact))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  gender name    weight height method   BMI contact
  &lt;fct&gt;  &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;  
1 male   William   90.5   184. car     26.8 &lt;NA&gt;   </code></pre>
</div>
</div>
</section>
<section id="dplyrright_join" class="level2">
<h2 class="anchored" data-anchor-id="dplyrright_join"><code>dplyr::right_join()</code></h2>
<ul>
<li>We can use the second object as the template: <code>right_join()</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">right_join</span>(contacts, <span class="at">by =</span> <span class="st">"name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tail</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  gender name    weight height method   BMI contact   
  &lt;fct&gt;  &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 male   Kenneth   82.1   178. car     26.0 0552174369
2 male   Branden   91.2   184. car     27.0 0525308694
3 &lt;NA&gt;   Cheryl    NA      NA  &lt;NA&gt;    NA   0517436082
4 &lt;NA&gt;   David     NA      NA  &lt;NA&gt;    NA   0539271806
5 &lt;NA&gt;   Kym       NA      NA  &lt;NA&gt;    NA   0541678253
6 &lt;NA&gt;   Ursula    NA      NA  &lt;NA&gt;    NA   0531964805</code></pre>
</div>
</div>
<ul>
<li>Any fields missing from <code>transport</code> will become <code>NA</code> where missing</li>
</ul>
</section>
<section id="dplyrfull_join" class="level2">
<h2 class="anchored" data-anchor-id="dplyrfull_join"><code>dplyr::full_join()</code></h2>
<ul>
<li>Combine everything using <code>full_join()</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">full_join</span>(contacts, <span class="at">by =</span> <span class="st">"name"</span>) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">is.na</span>(gender) <span class="sc">|</span> <span class="fu">is.na</span>(contact))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  gender name    weight height method   BMI contact   
  &lt;fct&gt;  &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 male   William   90.5   184. car     26.8 &lt;NA&gt;      
2 &lt;NA&gt;   Cheryl    NA      NA  &lt;NA&gt;    NA   0517436082
3 &lt;NA&gt;   David     NA      NA  &lt;NA&gt;    NA   0539271806
4 &lt;NA&gt;   Kym       NA      NA  &lt;NA&gt;    NA   0541678253
5 &lt;NA&gt;   Ursula    NA      NA  &lt;NA&gt;    NA   0531964805</code></pre>
</div>
</div>
<p>. . .</p>
<p>Will be missing values in both directions</p>
</section>
<section id="the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="the-tidyverse">The <code>tidyverse</code></h2>
<ul>
<li>The packages <code>dplyr</code>, <code>ggplot2</code> and <code>readr</code> are used in most workflows</li>
<li>Additional near-essential packages: <code>tidyr</code> and <code>forcats</code></li>
<li>All can be loaded with <code>library(tidyverse)</code>
<ul>
<li>A few less obvious packages like <code>purrr</code> are also loaded</li>
</ul></li>
</ul>
<p>. . .</p>
<p>Nearly <strong>all</strong> my analyses start with <code>library(tidyverse)</code></p>
</section>
<section id="conflicting-function-names" class="level2">
<h2 class="anchored" data-anchor-id="conflicting-function-names">Conflicting Function Names</h2>
<ul>
<li>Many functions in <code>dplyr</code> were inspired by SQL
<ul>
<li>Some function names have been used by multiple packages</li>
<li><code>select()</code> and <code>filter()</code> are most heavily used</li>
</ul></li>
<li>If a weird error occurs, add the package name before the function
<ul>
<li><code>dplyr::select()</code> or <code>dplyr::filter()</code></li>
<li>Calls the function <code>select()</code> from the namespace (i.e.&nbsp;package) <code>dplyr</code></li>
<li>I <u>always</u> do this for both functions as a habit</li>
</ul></li>
</ul>
</section>
<section id="conflicting-function-names-1" class="level2">
<h2 class="anchored" data-anchor-id="conflicting-function-names-1">Conflicting Function Names</h2>
<ul>
<li>One other package with a function called <code>select</code> is <code>GO.db</code></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GO.db)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> <span class="fu">select</span>(gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in (function (classes, fdef, mtable) : unable to find an inherited method for function 'select' for signature '"tbl_df"'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>transport <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 1
   gender
   &lt;fct&gt; 
 1 female
 2 female
 3 female
 4 female
 5 female
 6 female
 7 female
 8 female
 9 female
10 female
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script type="text/javascript">
  Reveal.on('ready', event => {
    if (event.indexh === 0) {
      document.querySelector("div.has-logo > img.slide-logo").style.display = "none";
    }
  });
  Reveal.addEventListener('slidechanged', (event) => {
    if (event.indexh === 0) {
      Reveal.configure({ slideNumber: null });
      document.querySelector("div.has-logo > img.slide-logo").style.display = "none";
    }
    if (event.indexh === 1) {
      Reveal.configure({ slideNumber: 'c' });
      document.querySelector("div.has-logo > img.slide-logo").style.display = null;
    }
  });
</script>



</body></html>